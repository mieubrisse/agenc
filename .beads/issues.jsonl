{"id":"agent-3m8","title":"Debug blank mission exits immediately and cannot be resumed","description":"After the server-side mission launch refactor (commit 9ca6441), creating a blank mission with 'agenc mission new --blank --focus' creates the mission and pool window, but the mission exits/errors immediately. Attempting to resume it also exits immediately. This suggests the wrapper process in the pool window is crashing on startup. Possible causes: (1) The pool window runs 'agenc mission resume \u003cid\u003e' which now goes through the wrapper's Run() method â€” but something in the wrapper startup fails for blank missions (no git repo, no agent directory contents?). (2) The wrapper's OAuth token setup might fail silently in the pool window context. (3) The wrapper might be detecting it's already running and refusing to start. Check the wrapper log at ~/.agenc/missions/\u003cid\u003e/wrapper.log and the pool window's tmux output for error messages. Key files: internal/wrapper/wrapper.go (Run method), internal/mission/mission.go (SpawnClaudeWithPrompt, BuildClaudeCmd), internal/server/pool.go (createPoolWindow). The pool window command is: '\u003cagenc-binary\u003e mission resume \u003cmission-id\u003e'.","notes":"The failing blank mission is 96376ab3. Check wrapper log at ~/.agenc/missions/96376ab3*/wrapper.log and pool window output.","status":"closed","priority":2,"issue_type":"bug","owner":"1142185+mieubrisse@users.noreply.github.com","created_at":"2026-02-28T14:12:57Z","created_by":"Kevin Today","updated_at":"2026-02-28T14:23:24Z","closed_at":"2026-02-28T14:23:24Z","close_reason":"Fixed: pool window commands now pass --run-wrapper to run the wrapper directly instead of going through the client-side attach flow that caused an infinite loop"}
{"id":"agent-pjk","title":"Debug 1-2s lag on mission resume","description":"After the server-side mission launch refactor (commit 9ca6441), 'agenc mission resume' has a noticeable 1-2s delay before the mission window appears. Previously resume was instant because the wrapper ran in-process. Now resume calls POST /missions/{id}/attach which does ensureWrapperInPool (checks PID file, checks pool window existence) + linkPoolWindow. The lag likely comes from one of: (1) ensureWrapperInPool doing multiple tmux commands sequentially (has-session, new-window), (2) the HTTP round-trip over Unix socket, (3) the serverClient() call in resumeMission doing ensureServerRunning + getAgencContext lazily, or (4) the tmux link-window command itself. Profile the attach flow to identify which step introduces the latency. Key files: cmd/mission_resume.go (resumeMission), internal/server/missions.go (handleAttachMission, ensureWrapperInPool), internal/server/pool.go (createPoolWindow, linkPoolWindow).","status":"open","priority":2,"issue_type":"bug","owner":"1142185+mieubrisse@users.noreply.github.com","created_at":"2026-02-28T14:12:46Z","created_by":"Kevin Today","updated_at":"2026-02-28T14:12:46Z"}
